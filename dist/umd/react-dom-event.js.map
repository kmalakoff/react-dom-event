{"version":3,"file":"react-dom-event.js","sources":["../../src/index.tsx"],"sourcesContent":["import React from 'react';\n\nexport type EventTypes = MouseEvent | TouchEvent | KeyboardEvent;\nexport type HandlerType = (event: EventTypes) => void;\n\nexport type EventContextType = {\n  subscribe: (handler: HandlerType) => void;\n};\n\nexport const EventContext = React.createContext<EventContextType | undefined>(\n  undefined,\n);\n\nexport type EventProviderProps = {\n  events?: string[];\n  children?: React.ReactNode;\n};\nexport function EventProvider({\n  events = ['click'],\n  children,\n}: EventProviderProps) {\n  const state = React.useState<HandlerType[]>([]);\n  const handlers = state[0]; // reduce transpiled array helpers \n\n  function onEvent(event: EventTypes) {\n    handlers.forEach((handler: HandlerType) => handler(event));\n  }\n  function subscribe(handler: HandlerType) {\n    handlers.push(handler);\n    return () => handlers.splice(handlers.indexOf(handler), 1);\n  }\n\n  React.useEffect(() => {\n    events.forEach((event) =>\n      window.document.addEventListener(event, onEvent, true),\n    );\n    return () =>\n      events.forEach((event) =>\n        window.document.removeEventListener(event, onEvent, true),\n      );\n  });\n  return (\n    <EventContext.Provider value={{ subscribe }}>\n      {children}\n    </EventContext.Provider>\n  );\n}\n\nexport function useEvent(handler, dependencies) {\n  const { subscribe } = React.useContext(EventContext);\n  React.useEffect(\n    () => subscribe(handler),\n    [subscribe, handler].concat(dependencies),\n  );\n}\n\nexport default {\n  EventContext,\n  EventProvider,\n  useEvent\n}\n"],"names":["EventContext","React","createContext","undefined","EventProvider","events","children","onEvent","event","handlers","forEach","handler","subscribe","push","splice","indexOf","state","useState","useEffect","window","document","addEventListener","removeEventListener","Provider","value","useEvent","dependencies","useContext","concat"],"mappings":";;;;;;;;;;AASO,MAAMA,YAAY,iBAAGC,yBAAK,CAACC,aAAa,CAC7CC,SAAS,EACT;EAMK,SAASC,aAAa,CAAC,KAGT,EAAE;EAHO,IAAA,IAAA,OAAA,GAAA,KAGT,CAFnBC,MAAM,EAANA,MAAM,GAAG,OAAA,KAAA,KAAA,CAAA,GAAA;UAAC,OAAO;EAAC,KAAA,GAAA,OAAA,EAClBC,QAAQ,GAFoB,KAGT,CADnBA,QAAQ,CAAA;EAKCC,IAAAA,IAAAA,OAAO,GAAhB,SAASA,OAAO,CAACC,KAAiB,EAAE;EAClCC,QAAAA,QAAQ,CAACC,OAAO,CAAC,SAACC,OAAoB,EAAA;qBAAKA,OAAO,CAACH,KAAK,CAAC,CAAA;EAAA,SAAA,CAAC,CAAC;EAC5D,KAAA,CAAA;EACQI,IAAAA,IAAAA,SAAS,GAAlB,SAASA,SAAS,CAACD,OAAoB,EAAE;EACvCF,QAAAA,QAAQ,CAACI,IAAI,CAACF,OAAO,CAAC,CAAC;UACvB,OAAO,WAAA;qBAAMF,QAAQ,CAACK,MAAM,CAACL,QAAQ,CAACM,OAAO,CAACJ,OAAO,CAAC,EAAE,CAAC,CAAC,CAAA;WAAA,CAAC;EAC5D,KAAA,CAAA;MATD,IAAMK,KAAK,GAAGf,yBAAK,CAACgB,QAAQ,CAAgB,EAAE,CAAC,CAAC;MAChD,IAAMR,QAAQ,GAAGO,KAAK,CAAC,CAAC,CAAE;MAU1Bf,yBAAK,CAACiB,SAAS,CAAC,WAAM;EACpBb,QAAAA,MAAM,CAACK,OAAO,CAAC,SAACF,KAAK,EAAA;qBACnBW,MAAM,CAACC,QAAQ,CAACC,gBAAgB,CAACb,KAAK,EAAED,OAAO,EAAE,IAAI,CAAC,CAAA;EAAA,SAAA,CACvD,CAAC;UACF,OAAO,WAAA;EACLF,YAAAA,OAAAA,MAAM,CAACK,OAAO,CAAC,SAACF,KAAK,EAAA;yBACnBW,MAAM,CAACC,QAAQ,CAACE,mBAAmB,CAACd,KAAK,EAAED,OAAO,EAAE,IAAI,CAAC,CAAA;eAAA,CAC1D,CAAA;WAAA,CAAC;EACL,KAAA,CAAC,CAAC;MACH,qBACEN,yBAAA,CAAA,aAAA,CAACD,YAAY,CAACuB,QAAQ,EAAA;EAACC,QAAAA,KAAK,EAAE;EAAEZ,YAAAA,SAAS,EAATA,SAAS;EAAE,SAAA;EACxCN,KAAAA,EAAAA,QAAQ,CACa,CACxB;EACH,CAAA;EAEM,SAASmB,QAAQ,CAACd,OAAO,EAAEe,YAAY,EAAE;EAC9C,IAAA,IAAM,SAAW,GAAKzB,yBAAK,CAAC0B,UAAU,CAAC3B,YAAY,CAAC,CAA5CY,SAA4C,CAAC;MACrDX,yBAAK,CAACiB,SAAS,CACb,WAAA;iBAAMN,SAAS,CAACD,OAAO,CAAC,CAAA;OAAA,EACxB;UAACC,SAAS;UAAED,OAAO;EAAC,KAAA,CAACiB,MAAM,CAACF,YAAY,CAAC,CAC1C,CAAC;EACH,CAAA;AAED,cAAe;EACb1B,IAAAA,YAAY,EAAZA,YAAY;EACZI,IAAAA,aAAa,EAAbA,aAAa;EACbqB,IAAAA,QAAQ,EAARA,QAAQ;GACT;;;;;;;;;;;;;"}