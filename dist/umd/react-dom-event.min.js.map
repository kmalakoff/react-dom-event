{"version":3,"file":"react-dom-event.min.js","sources":["../../src/index.tsx"],"sourcesContent":["import React from 'react';\n\nexport type EventTypes = MouseEvent | TouchEvent | KeyboardEvent;\nexport type HandlerType = (event: EventTypes) => void;\n\nexport type EventContextType = {\n  subscribe: (handler: HandlerType) => void;\n};\n\nexport const EventContext = React.createContext<EventContextType | undefined>(\n  undefined,\n);\n\nexport type EventProviderProps = {\n  events?: string[];\n  children?: React.ReactNode;\n};\nexport function EventProvider({\n  events = ['click'],\n  children,\n}: EventProviderProps) {\n  const state = React.useState<HandlerType[]>([]);\n  const handlers = state[0]; // reduce transpiled array helpers \n\n  function onEvent(event: EventTypes) {\n    handlers.forEach((handler: HandlerType) => handler(event));\n  }\n  function subscribe(handler: HandlerType) {\n    handlers.push(handler);\n    return () => handlers.splice(handlers.indexOf(handler), 1);\n  }\n\n  React.useEffect(() => {\n    events.forEach((event) =>\n      window.document.addEventListener(event, onEvent, true),\n    );\n    return () =>\n      events.forEach((event) =>\n        window.document.removeEventListener(event, onEvent, true),\n      );\n  });\n  return (\n    <EventContext.Provider value={{ subscribe }}>\n      {children}\n    </EventContext.Provider>\n  );\n}\n\nexport function useEvent(handler, dependencies) {\n  const { subscribe } = React.useContext(EventContext);\n  React.useEffect(\n    () => subscribe(handler),\n    [subscribe, handler].concat(dependencies),\n  );\n}\n\nexport default {\n  EventContext,\n  EventProvider,\n  useEvent\n}\n"],"names":["EventContext","React","createContext","undefined","EventProvider","param","_events","events","children","onEvent","event","handlers","forEach","handler","useState","useEffect","window","document","addEventListener","removeEventListener","createElement","Provider","value","subscribe","push","splice","indexOf","useEvent","dependencies","useContext","concat","index"],"mappings":"2WASaA,EAAeC,EAAAA,QAAMC,mBAChCC,GAOK,SAASC,EAAcC,GAAA,IAAAC,EAAAD,EAC5BE,OAAAA,OAAS,IAAAD,EAAA,CAAC,SAAQA,EAClBE,EAF4BH,EAE5BG,SAKSC,EAAT,SAAiBC,GACfC,EAASC,SAAQ,SAACC,UAAyBA,EAAQH,OAH/CC,EADQV,EAAAA,QAAMa,SAAwB,IACrB,GAmBvB,OATAb,EAAK,QAACc,WAAU,WAId,OAHAR,EAAOK,SAAQ,SAACF,UACdM,OAAOC,SAASC,iBAAiBR,EAAOD,GAAS,MAE5C,WACLF,OAAAA,EAAOK,SAAQ,SAACF,UACdM,OAAOC,SAASE,oBAAoBT,EAAOD,GAAS,UAIxDR,UAAAmB,cAACpB,EAAaqB,SAAQ,CAACC,MAAO,CAAEC,UAflC,SAAmBV,GAEjB,OADAF,EAASa,KAAKX,GACP,kBAAMF,EAASc,OAAOd,EAASe,QAAQb,GAAU,OAcrDL,GAKA,SAASmB,EAASd,EAASe,GAChC,IAAML,EAAgBtB,EAAK,QAAC4B,WAAW7B,GAA/BuB,UACRtB,EAAK,QAACc,WACJ,kBAAMQ,EAAUV,KAChB,CAACU,EAAWV,GAASiB,OAAOF,IAIjB,IAAAG,EAAA,CACb/B,aAAAA,EACAI,cAAAA,EACAuB,SAAAA"}