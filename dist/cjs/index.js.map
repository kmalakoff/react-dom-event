{"version":3,"sources":["index.tsx"],"sourcesContent":["import * as React from 'react';\n\nexport type EventTypes = MouseEvent | TouchEvent | KeyboardEvent;\nexport type HandlerType = (event: EventTypes) => void;\n\nexport type EventContextType = {\n  subscribe: (handler: HandlerType) => void;\n};\n\nexport const EventContext = React.createContext<EventContextType | undefined>(\n  undefined,\n);\n\nexport type EventProviderProps = {\n  events?: string[];\n  children?: React.ReactNode;\n};\nexport function EventProvider({\n  events = ['click'],\n  children,\n}: EventProviderProps) {\n  const [handlers] = React.useState<HandlerType[]>([]);\n  function onEvent(event: EventTypes) {\n    handlers.forEach((subscriber) => subscriber(event));\n  }\n  function subscribe(handler: HandlerType) {\n    handlers.push(handler);\n    return () => handlers.splice(handlers.indexOf(handler), 1);\n  }\n\n  React.useEffect(() => {\n    events.forEach((event) =>\n      window.document.addEventListener(event, onEvent, true),\n    );\n    return () =>\n      events.forEach((event) =>\n        window.document.removeEventListener(event, onEvent, true),\n      );\n  });\n  return (\n    <EventContext.Provider value={{ subscribe }}>\n      {children}\n    </EventContext.Provider>\n  );\n}\n\nexport function useEvent(handler, dependencies) {\n  const { subscribe } = React.useContext(EventContext);\n  React.useEffect(\n    () => subscribe(handler),\n    [subscribe, handler].concat(dependencies),\n  );\n}\n"],"names":["EventProvider","useEvent","React","EventContext","createContext","undefined","events","children","onEvent","event","handlers","forEach","subscriber","subscribe","handler","push","splice","indexOf","useState","useEffect","window","document","addEventListener","removeEventListener","Provider","value","dependencies","useContext","concat"],"mappings":"AAAA;;;;QAiBgBA,aAAa,GAAbA,aAAa;QA6BbC,QAAQ,GAARA,QAAQ;;AA9CZC,IAAAA,KAAK,mCAAM,OAAO,EAAb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASV,IAAMC,YAAY,iBAAGD,KAAK,CAACE,aAAa,CAC7CC,SAAS,CACV,AAAC;QAFWF,YAAY,GAAZA,YAAY;AAQlB,SAASH,aAAa,CAAC,KAGT,EAAE;kBAHO,KAGT,CAFnBM,MAAM,EAANA,MAAM,wBAAG;QAAC,OAAO;KAAC,UAAA,EAClBC,QAAQ,GAFoB,KAGT,CADnBA,QAAQ;QAGCC,OAAO,GAAhB,SAASA,OAAO,CAACC,KAAiB,EAAE;QAClCC,QAAQ,CAACC,OAAO,CAAC,SAACC,UAAU;mBAAKA,UAAU,CAACH,KAAK,CAAC;SAAA,CAAC,CAAC;KACrD;QACQI,SAAS,GAAlB,SAASA,SAAS,CAACC,OAAoB,EAAE;QACvCJ,QAAQ,CAACK,IAAI,CAACD,OAAO,CAAC,CAAC;QACvB,OAAO;mBAAMJ,QAAQ,CAACM,MAAM,CAACN,QAAQ,CAACO,OAAO,CAACH,OAAO,CAAC,EAAE,CAAC,CAAC;SAAA,CAAC;KAC5D;IAPD,IAAmBZ,GAAiC,kBAAjCA,KAAK,CAACgB,QAAQ,CAAgB,EAAE,CAAC,IAAA,EAA7CR,QAAQ,GAAIR,GAAiC,GAArC,AAAsC;IASrDA,KAAK,CAACiB,SAAS,CAAC,WAAM;QACpBb,MAAM,CAACK,OAAO,CAAC,SAACF,KAAK;mBACnBW,MAAM,CAACC,QAAQ,CAACC,gBAAgB,CAACb,KAAK,EAAED,OAAO,EAAE,IAAI,CAAC;SAAA,CACvD,CAAC;QACF,OAAO;mBACLF,MAAM,CAACK,OAAO,CAAC,SAACF,KAAK;uBACnBW,MAAM,CAACC,QAAQ,CAACE,mBAAmB,CAACd,KAAK,EAAED,OAAO,EAAE,IAAI,CAAC;aAAA,CAC1D;SAAA,CAAC;KACL,CAAC,CAAC;IACH,qBACE,oBAACL,YAAY,CAACqB,QAAQ;QAACC,KAAK,EAAE;YAAEZ,SAAS,EAATA,SAAS;SAAE;OACxCN,QAAQ,CACa,CACxB;CACH;AAEM,SAASN,QAAQ,CAACa,OAAO,EAAEY,YAAY,EAAE;IAC9C,IAAM,AAAEb,SAAS,GAAKX,KAAK,CAACyB,UAAU,CAACxB,YAAY,CAAC,CAA5CU,SAAS,AAAmC,AAAC;IACrDX,KAAK,CAACiB,SAAS,CACb;eAAMN,SAAS,CAACC,OAAO,CAAC;KAAA,EACxB;QAACD,SAAS;QAAEC,OAAO;KAAC,CAACc,MAAM,CAACF,YAAY,CAAC,CAC1C,CAAC;CACH"}