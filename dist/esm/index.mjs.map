{"version":3,"sources":["index.tsx"],"sourcesContent":["import React from 'react';\n\nexport type EventTypes = MouseEvent | TouchEvent | KeyboardEvent;\nexport type HandlerType = (event: EventTypes) => void;\n\nexport type EventContextType = {\n  subscribe: (handler: HandlerType) => void;\n};\n\nexport const EventContext = React.createContext<EventContextType | undefined>(\n  undefined,\n);\n\nexport type EventProviderProps = {\n  events?: string[];\n  children?: React.ReactNode;\n};\nexport function EventProvider({\n  events = ['click'],\n  children,\n}: EventProviderProps) {\n  const state = React.useState<HandlerType[]>([]);\n  const handlers = state[0]; // reduce transpiled array helpers\n\n  function onEvent(event: EventTypes) {\n    handlers.forEach((handler: HandlerType) => handler(event));\n  }\n  function subscribe(handler: HandlerType) {\n    handlers.push(handler);\n    return () => handlers.splice(handlers.indexOf(handler), 1);\n  }\n\n  React.useEffect(() => {\n    events.forEach((event) =>\n      window.document.addEventListener(event, onEvent, true),\n    );\n    return () =>\n      events.forEach((event) =>\n        window.document.removeEventListener(event, onEvent, true),\n      );\n  });\n  return (\n    <EventContext.Provider value={{ subscribe }}>\n      {children}\n    </EventContext.Provider>\n  );\n}\n\nexport function useEvent(handler, dependencies) {\n  const context = React.useContext(EventContext);\n  if (!context) {\n    throw new Error(\n      'react-dom-event: subscribe not found on context. You might be missing the EventProvider or have multiple instances of react-dom-event',\n    );\n  }\n\n  React.useEffect(\n    () => context.subscribe(handler),\n    [context.subscribe, handler].concat(dependencies),\n  );\n}\n"],"names":["React","EventContext","createContext","undefined","EventProvider","events","children","state","useState","handlers","onEvent","event","forEach","handler","subscribe","push","splice","indexOf","useEffect","window","document","addEventListener","removeEventListener","Provider","value","useEvent","dependencies","context","useContext","Error","concat"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO,CAAC;AAS1B,OAAO,MAAMC,YAAY,iBAAGD,KAAK,CAACE,aAAa,CAC7CC,SAAS,CACV,CAAC;AAMF,OAAO,SAASC,aAAa,CAAC,EAC5BC,MAAM,EAAG;IAAC,OAAO;CAAC,CAAA,EAClBC,QAAQ,CAAA,EACW,EAAE;IACrB,MAAMC,KAAK,GAAGP,KAAK,CAACQ,QAAQ,CAAgB,EAAE,CAAC,AAAC;IAChD,MAAMC,QAAQ,GAAGF,KAAK,CAAC,CAAC,CAAC,AAAC,EAAC,kCAAkC;IAE7D,SAASG,OAAO,CAACC,KAAiB,EAAE;QAClCF,QAAQ,CAACG,OAAO,CAAC,CAACC,OAAoB,GAAKA,OAAO,CAACF,KAAK,CAAC,CAAC,CAAC;KAC5D;IACD,SAASG,SAAS,CAACD,OAAoB,EAAE;QACvCJ,QAAQ,CAACM,IAAI,CAACF,OAAO,CAAC,CAAC;QACvB,OAAO,IAAMJ,QAAQ,CAACO,MAAM,CAACP,QAAQ,CAACQ,OAAO,CAACJ,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;KAC5D;IAEDb,KAAK,CAACkB,SAAS,CAAC,IAAM;QACpBb,MAAM,CAACO,OAAO,CAAC,CAACD,KAAK,GACnBQ,MAAM,CAACC,QAAQ,CAACC,gBAAgB,CAACV,KAAK,EAAED,OAAO,EAAE,IAAI,CAAC,CACvD,CAAC;QACF,OAAO,IACLL,MAAM,CAACO,OAAO,CAAC,CAACD,KAAK,GACnBQ,MAAM,CAACC,QAAQ,CAACE,mBAAmB,CAACX,KAAK,EAAED,OAAO,EAAE,IAAI,CAAC,CAC1D,CAAC;KACL,CAAC,CAAC;IACH,qBACE,oBAACT,YAAY,CAACsB,QAAQ;QAACC,KAAK,EAAE;YAAEV,SAAS;SAAE;OACxCR,QAAQ,CACa,CACxB;CACH;AAED,OAAO,SAASmB,QAAQ,CAACZ,OAAO,EAAEa,YAAY,EAAE;IAC9C,MAAMC,OAAO,GAAG3B,KAAK,CAAC4B,UAAU,CAAC3B,YAAY,CAAC,AAAC;IAC/C,IAAI,CAAC0B,OAAO,EAAE;QACZ,MAAM,IAAIE,KAAK,CACb,uIAAuI,CACxI,CAAC;KACH;IAED7B,KAAK,CAACkB,SAAS,CACb,IAAMS,OAAO,CAACb,SAAS,CAACD,OAAO,CAAC,EAChC;QAACc,OAAO,CAACb,SAAS;QAAED,OAAO;KAAC,CAACiB,MAAM,CAACJ,YAAY,CAAC,CAClD,CAAC;CACH"}